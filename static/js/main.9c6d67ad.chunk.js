(this["webpackJsonppirate-battleship"]=this["webpackJsonppirate-battleship"]||[]).push([[0],{13:function(e,t,r){},14:function(e,t,r){},16:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),c=r(8),i=r.n(c),s=(r(13),r(2)),o=(r(14),r(0)),l=function(e){var t=e.string,r=e.textSize,a=e.handleClick;return Object(o.jsx)("button",{style:{transition:"font-size .2s ease"},onClick:a,className:"w-36 h-16 ".concat(r," p-2 mx-4 my-2 bg-red-200 rounded border border-black"),children:t})},d=r.p+"static/media/skull.d7a54c84.png",u=r.p+"static/media/home-scroll.a99cd0f2.png",h=r.p+"static/media/home-water.5910a5d9.png",b=r(3),f=r(6),j=function(){for(var e=[],t=0;t<8;t++){for(var r=[],a=0;a<8;a++)r.push("W");e.push(r)}return{boardState:e,placeShip:function(t,r,a){var n=Object(f.a)(r),c=n[0]-1,i=n[1]-1;!function(t,r,a,n){for(var c=0;c<t;c++){if("Y"===n&&r>7||"X"===n&&a>7)throw new Error("Not enough room for ship to be placed here.");if("O"===e[r][a])throw new Error("Can't place ship here, collides with another.");"X"===n?a++:r++}}(t,c,i,a);for(var s=0;s<t;s++)e[c][i]="O","X"===a?i++:c++},recieveAttack:function(t){var r=Object(f.a)(t),a=r[0]-1,n=r[1]-1;if("H"===e[a][n]||"M"===e[a][n])throw new Error("Spot has already been attacked.");"O"===e[a][n]?e[a][n]="H":e[a][n]="M"}}},p=function(e,t){for(var r=[],a=0;a<t;a++)r.push({hitMarker:!1,cord:""});return{name:e,body:r,checkForDeath:function(){var e,t=!0,a=Object(b.a)(r);try{for(a.s();!(e=a.n()).done;){if(!1===e.value.hitMarker){t=!1;break}}}catch(n){a.e(n)}finally{a.f()}return t}}},m=function(e){var t=j(),r={carrier:p("Carrier",5),battleship:p("Battleship",4),cruiser:p("Cruiser",3),submarine:p("Submarine",3),destroyer:p("Destroyer",2)};return{name:e,board:t,ships:r,placeMyShip:function(e,r,a){t.placeShip(e.body.length,r,a);var n,c=Object(f.a)(r),i=c[0],s=c[1],o=Object(b.a)(e.body);try{for(o.s();!(n=o.n()).done;){n.value.cord=[i,s],"X"===a?s++:i++}}catch(l){o.e(l)}finally{o.f()}},attack:function(e,t){e.board.recieveAttack(t),e.shipsHitCheck(t)},shipsHitCheck:function(e){for(var t in r){var a,n=Object(b.a)(r[t].body);try{for(n.s();!(a=n.n()).done;){var c=a.value;if(JSON.stringify(c.cord)===JSON.stringify(e)){c.hitMarker=!0;break}}}catch(i){n.e(i)}finally{n.f()}}},shipsDeadCheck:function(){for(var e=!0,t=["carrier","battleship","cruiser","submarine","destroyer"],a=0;a<t.length;a++)if(!1===r[t[a]].checkForDeath()){e=!1;break}return e}}},x="min-h-screen flex flex-col items-center",y="w-full flex items-center justify-center relative",g="h-40 w-full",O="absolute text-2xl md:text-4xl text-red-700",v="w-full flex items-center justify-center relative",w="absolute flex flex-wrap justify-center items-center",S="fixed bottom-0 w-full h-1/5",k=function(e){var t=e.placingStart,r=e.setVsCpu;return Object(o.jsxs)("div",{className:x,children:[Object(o.jsxs)("div",{className:y,style:{maxWidth:"40rem"},children:[Object(o.jsx)("img",{className:g,alt:"scroll",src:u}),Object(o.jsx)("div",{className:O,children:"PIRATESHIPS"})]}),Object(o.jsxs)("div",{className:v,children:[Object(o.jsx)("img",{alt:"skull",style:{maxWidth:"30rem"},className:"w-full",src:d}),Object(o.jsxs)("div",{className:w,children:[Object(o.jsx)(l,{string:"1 Player",textSize:"text-xl",handleClick:function(){r(!0);var e=m("Player One"),a=m("Player Two");t(e,a)}}),Object(o.jsx)(l,{string:"2 Player",textSize:"text-xl",handleClick:function(){r(!1);var e=m("Player One"),a=m("Player Two");t(e,a)}})]})]}),Object(o.jsx)("img",{style:{maxHeight:"5rem"},className:S,src:h,alt:"water"})]})},C=function(e){for(var t=e.boardState,r=e.gridSpotClick,a=e.hideOccupied,n=void 0!==a&&a,c=[],i=1;i<=8;i++){for(var s=[],l=function(){var e=[i,d],a=Object(o.jsx)("div",{id:"".concat(e),style:{cursor:"pointer",height:"100%",width:"12.5%"},onClick:function(){try{r(e)}catch(t){return void alert("For some reason clicking on your own board doesnt get disabled against cpus lol. Go attack the opponents board!")}},className:"".concat("none"===r?"pointer-events-none":"pointer-events-auto"," my-grid-border grid-spot transition-colors ").concat("O"===t[i-1][d-1]&&!1===n?"":"hover:bg-grid-hover-bgc"," ").concat("O"===t[i-1][d-1]&&!1===n?"bg-grid-occ":"H"===t[i-1][d-1]?"bg-grid-hit":"M"===t[i-1][d-1]?"bg-grid-miss":"")},e);s.push(a)},d=1;d<=8;d++)l();c.push(Object(o.jsx)("div",{style:{height:"12.5%"},className:"flex w-full",children:s},i))}return c},N=function(e,t){return"mx-1 ".concat(e.name===t?"text-red-700":"")},P=function(e){var t=e.placingShip,r=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useRef)(),i=Object(a.useRef)(),s=Object(a.useRef)();return Object(a.useEffect)((function(){"Carrier"===t.name?(r.current.style.textDecoration="none",n.current.style.textDecoration="none",c.current.style.textDecoration="none",i.current.style.textDecoration="none",s.current.style.textDecoration="none"):"Battleship"===t.name?r.current.style.textDecoration="line-through":"Cruiser"===t.name?n.current.style.textDecoration="line-through":"Submarine"===t.name?c.current.style.textDecoration="line-through":"Destroyer"===t.name?i.current.style.textDecoration="line-through":"done"===t&&(s.current.style.textDecoration="line-through")})),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{ref:r,className:N(t,"Carrier"),children:"Carrier"}),Object(o.jsx)("div",{ref:n,className:N(t,"Battleship"),children:"Battleship"}),Object(o.jsx)("div",{ref:c,className:N(t,"Cruiser"),children:"Cruiser"}),Object(o.jsx)("div",{ref:i,className:N(t,"Submarine"),children:"Submarine"}),Object(o.jsx)("div",{ref:s,className:N(t,"Destroyer"),children:"Destroyer"})]})},T=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},D=function(){return[T(1,8),T(1,8)]},M=function(){var e=T(0,1);return 0===e?"X":1===e?"Y":void 0},z={randomNumberGen:T,randomCordGen:D,fillBoardRandomly:function(e){for(;""===e.ships.carrier.body[0].cord;)try{e.placeMyShip(e.ships.carrier,D(),M())}catch(t){continue}for(;""===e.ships.battleship.body[0].cord;)try{e.placeMyShip(e.ships.battleship,D(),M())}catch(t){continue}for(;""===e.ships.cruiser.body[0].cord;)try{e.placeMyShip(e.ships.cruiser,D(),M())}catch(t){continue}for(;""===e.ships.submarine.body[0].cord;)try{e.placeMyShip(e.ships.submarine,D(),M())}catch(t){continue}for(;""===e.ships.destroyer.body[0].cord;)try{e.placeMyShip(e.ships.destroyer,D(),M())}catch(t){continue}},attackBoardRandomly:function(e,t){for(var r=D(),a=r,n=Object(s.a)(a,2),c=n[0],i=n[1];"H"===t.board.boardState[c-1][i-1]||"M"===t.board.boardState[c-1][i-1];){var o=r=D(),l=Object(s.a)(o,2);c=l[0],i=l[1]}e.attack(t,r)}},A="bg-center",B="text-center text-red-700 text-3xl pb-1 bg-gray-300 bg-opacity-90",E="w-5/6 mt-3 mx-auto bg-water-tile my-grid-border",R=function(e){return"".concat("done"===e?"flex":"hidden"," justify-center text-red-700")},H=function(e){return"".concat("done"!==e?"flex":"hidden"," justify-evenly text-red-700")},I="relative flex justify-center items-center",V="absolute w-44 sm:w-64 text-sm sm:text-lg flex flex-wrap justify-around",X=function(e){var t=e.player,r=e.setViewPage,n=e.vsCpu,c=Object(a.useState)(t.ships.carrier),i=Object(s.a)(c,2),h=i[0],b=i[1],f=Object(a.useState)("X"),j=Object(s.a)(f,2),p=j[0],m=j[1];Object(a.useEffect)((function(){"Player Two"===t.name&&!0===n&&(z.fillBoardRandomly(t),r("playing"))})),Object(a.useEffect)((function(){"Player Two"===t.name&&b(t.ships.carrier)}),[t]);var x=function(){"Carrier"===h.name?b(t.ships.battleship):"Battleship"===h.name?b(t.ships.cruiser):"Cruiser"===h.name?b(t.ships.submarine):"Submarine"===h.name?b(t.ships.destroyer):"Destroyer"===h.name?b("done"):"done"===h&&b(t.ships.carrier)};return Object(o.jsxs)("div",{className:A,style:{minHeight:"100vh",backgroundImage:"url(".concat(d,")"),backgroundSize:"20%"},children:[Object(o.jsxs)("div",{className:B,children:[t.name," Place Ships"]}),Object(o.jsx)("div",{style:{height:"60vh",backgroundSize:"12.5% 12.5%",opacity:".8"},className:E,children:Object(o.jsx)(C,{boardState:t.board.boardState,gridSpotClick:"done"===h?"none":function(e){try{t.placeMyShip(h,e,p)}catch(r){return void alert(r)}x()}})}),Object(o.jsx)("div",{className:R(h),children:Object(o.jsx)(l,{textSize:"text-xl",string:"Ready",handleClick:function(){"Player Two"===t.name?(r("playing"),x()):(r("placingTwo"),x())}})}),Object(o.jsxs)("div",{className:H(h),children:[Object(o.jsx)(l,{textSize:"".concat("X"===p?"text-4xl":"text-xl"),string:"X",handleClick:function(){m("X")}}),Object(o.jsx)(l,{string:"Y",textSize:"".concat("Y"===p?"text-4xl":"text-xl"),handleClick:function(){m("Y")},children:"Y"})]}),Object(o.jsxs)("div",{className:I,children:[Object(o.jsx)("img",{src:u,alt:"scroll-img",className:"w-full h-36"}),Object(o.jsx)("div",{className:V,children:Object(o.jsx)(P,{player:t,placingShip:h,setPlacingShip:b})})]})]})},Y=function(e){var t=e.boardOne,r=e.playerOneAttacking,a=e.boardTwo,n=e.playerTwoAttacking,c=e.whosTurn,i=e.viewingBoard;return Object(o.jsx)(o.Fragment,{children:1===i?Object(o.jsx)(C,{className:c===i?"pointer-events-none":"pointer-events-auto",boardState:t,gridSpotClick:1===c?"none":n,hideOccupied:1!==c}):Object(o.jsx)(C,{className:c===i?"pointer-events-none":"pointer-events-auto",boardState:a,gridSpotClick:2===c?"none":r,hideOccupied:2!==c})})},F="w-full h-full flex flex-col justify-center items-center text-center bg-indigo-100",W="text-3xl text-red-700",G="text-red-700 my-3",J=function(e){var t=e.winnerName,r=e.setViewPage;return Object(o.jsxs)("div",{className:F,children:[Object(o.jsxs)("div",{className:W,children:[t," Wins!"]}),Object(o.jsx)("div",{className:G,children:"Would you like to play more?"}),Object(o.jsx)(l,{string:"New game",textSize:"text-base",handleClick:function(){r("")}})]})},L="bg-center",q="text-center text-red-700 text-3xl pb-1 bg-gray-300 bg-opacity-90",U="w-5/6 mt-3 mx-auto bg-water-tile my-grid-border",K="flex justify-center",Q=function(e){var t=e.players,r=e.vsCpu,n=e.setViewPage,c=Object(a.useState)(1),i=Object(s.a)(c,2),u=i[0],h=i[1],f=Object(a.useState)(2),j=Object(s.a)(f,2),p=j[0],m=j[1],x=Object(a.useState)(""),y=Object(s.a)(x,2),g=y[0],O=y[1],v=t.playerOne,w=t.playerTwo;Object(a.useEffect)((function(){if(2===u&&!0===r){!function(e){for(var t=Array.from(document.querySelectorAll(".grid-spot")),r=0,a=t;r<a.length;r++)a[r].style.pointerEvents="none";var n=0,c=0,i=setInterval((function(){n=c,c=z.randomNumberGen(0,63),t[c].classList.add("grid-random-highlight")}),150),s=setInterval((function(){t[n].classList.remove("grid-random-highlight")}),150);setTimeout((function(){var e,r=Object(b.a)(t);try{for(r.s();!(e=r.n()).done;)e.value.style.pointerEvents="auto"}catch(a){r.e(a)}finally{r.f()}t[c].classList.remove("grid-random-highlight"),clearInterval(s),clearInterval(i)}),e-100)}(2300),setTimeout((function(){z.attackBoardRandomly(w,v),h(1),m(2)}),2300)}}));return Object(o.jsxs)("div",{className:L,style:{minHeight:"100vh",backgroundImage:"url(".concat(d,")"),backgroundSize:"20%"},children:[Object(o.jsx)("div",{className:q,children:""!==g?"It's Over!":p===u?"Your board":2===u&&!0===r?"CPU attacking":2===u&&1===p?"Player Two Pick Attack Cord":1===u&&2===p?"Player One Pick Attack Cord":""}),Object(o.jsx)("div",{style:{height:"60vh",backgroundSize:"12.5% 12.5%",opacity:".8"},className:U,children:""===g?Object(o.jsx)(Y,{boardOne:v.board.boardState,playerOneAttacking:function(e){try{v.attack(w,e)}catch(t){return void alert(t)}!0===w.shipsDeadCheck()&&O("Player One"),m(1),h(2)},boardTwo:w.board.boardState,playerTwoAttacking:function(e){try{w.attack(v,e)}catch(t){return void alert(t)}!0===v.shipsDeadCheck()&&O("Player Two"),m(2),h(1)},whosTurn:u,viewingBoard:p}):Object(o.jsx)(J,{winnerName:g,setViewPage:n})}),Object(o.jsx)("div",{className:K,children:2===u&&!0===r?"":Object(o.jsx)(l,{string:"Toggle View",textSize:"text-base",handleClick:function(){m(1===p?2:1)}})})]})};var Z=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(""),i=Object(s.a)(c,2),l=i[0],d=i[1],u=Object(a.useState)([]),h=Object(s.a)(u,2),b=h[0],f=h[1];return Object(o.jsx)("div",{className:"App",children:"placing"===r?Object(o.jsx)(X,{player:b.playerOne,setViewPage:n,vsCpu:l}):"placingTwo"===r?Object(o.jsx)(X,{player:b.playerTwo,setViewPage:n,vsCpu:l}):"playing"===r?Object(o.jsx)(Q,{players:b,vsCpu:l,setViewPage:n}):Object(o.jsx)(k,{placingStart:function(e,t){f({playerOne:e,playerTwo:t}),n("placing")},setVsCpu:d,vsCpu:l})})};i.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(Z,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.9c6d67ad.chunk.js.map